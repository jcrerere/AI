import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__ from "https://testingcf.jsdelivr.net/npm/compare-versions/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__ from "https://testingcf.jsdelivr.net/npm/json5/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_jsonrepair_esm_703c329d__ from "https://testingcf.jsdelivr.net/npm/jsonrepair/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_zod_v4_core_esm_e929c490__ from "https://testingcf.jsdelivr.net/npm/zod/v4/core/+esm";

var __webpack_modules__ = {
  "./util/common.ts"(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignInplace: () => (/* binding */ assignInplace),\n/* harmony export */   checkAndUpdateCharacter: () => (/* binding */ checkAndUpdateCharacter),\n/* harmony export */   checkMinimumVersion: () => (/* binding */ checkMinimumVersion),\n/* harmony export */   chunkBy: () => (/* binding */ chunkBy),\n/* harmony export */   correctlyMerge: () => (/* binding */ correctlyMerge),\n/* harmony export */   literalYamlify: () => (/* binding */ literalYamlify),\n/* harmony export */   parseString: () => (/* binding */ parseString),\n/* harmony export */   prettifyErrorWithInput: () => (/* binding */ prettifyErrorWithInput),\n/* harmony export */   regexFromString: () => (/* binding */ regexFromString),\n/* harmony export */   uuidv4: () => (/* binding */ uuidv4)\n/* harmony export */ });\n/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! compare-versions */ \"compare-versions\");\n/* harmony import */ var json5__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! json5 */ \"json5\");\n/* harmony import */ var jsonrepair__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonrepair */ \"jsonrepair\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4/core */ \"zod/v4/core\");\n\n\n\n\nfunction assignInplace(destination, new_array) {\n    destination.length = 0;\n    destination.push(...new_array);\n    return destination;\n}\n// 修正 _.merge 对数组的合并逻辑, [1, 2, 3] 和 [4, 5] 合并后变成 [4, 5] 而不是 [4, 5, 3]\nfunction correctlyMerge(lhs, rhs) {\n    return _.mergeWith(lhs, rhs, (_lhs, rhs) => (_.isArray(rhs) ? rhs : undefined));\n}\nfunction chunkBy(array, predicate) {\n    if (array.length === 0) {\n        return [];\n    }\n    const chunks = [[array[0]]];\n    for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n        if (predicate(lhs, rhs)) {\n            chunks[chunks.length - 1].push(rhs);\n        }\n        else {\n            chunks.push([rhs]);\n        }\n    }\n    return chunks;\n}\nfunction regexFromString(input, replace_macros) {\n    if (!input) {\n        return null;\n    }\n    const makeRegex = (pattern, flags) => {\n        if (replace_macros) {\n            pattern = substitudeMacros(pattern);\n        }\n        return new RegExp(pattern, flags);\n    };\n    try {\n        const match = input.match(/\\/(.+)\\/([a-z]*)/i);\n        if (!match) {\n            return makeRegex(_.escapeRegExp(input), 'i');\n        }\n        if (match[2] && !/^(?!.*?(.).*?\\1)[gmixXsuUAJ]+$/.test(match[3])) {\n            return makeRegex(input, 'i');\n        }\n        let flags = match[2] ?? '';\n        _.pull(flags, 'g');\n        if (flags.indexOf('i') === -1) {\n            flags = flags + 'i';\n        }\n        return makeRegex(match[1], flags);\n    }\n    catch {\n        return null;\n    }\n}\nfunction uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nasync function checkMinimumVersion(expected, title) {\n    if ((0,compare_versions__WEBPACK_IMPORTED_MODULE_0__.compare)(await getTavernHelperVersion(), expected, '<')) {\n        toastr.error(`'${title}' 需要酒馆助手版本 >= '${expected}'`, '版本不兼容');\n    }\n}\nfunction prettifyErrorWithInput(error) {\n    return _([...error.issues])\n        .sortBy(issue => issue.path?.length ?? 0)\n        .flatMap(issue => {\n        const lines = [`✖ ${issue.message}`];\n        if (issue.path?.length) {\n            lines.push(`  → 路径: ${(0,zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.toDotPath)(issue.path)}`);\n        }\n        if (issue.input !== undefined) {\n            lines.push(`  → 输入: ${JSON.stringify(issue.input)}`);\n        }\n        return lines;\n    })\n        .join('\\n');\n}\nfunction literalYamlify(value) {\n    return YAML.stringify(value, { blockQuote: 'literal' });\n}\nfunction parseString(content) {\n    let parsed;\n    try {\n        parsed = YAML.parseDocument(content, { merge: true }).toJS();\n    }\n    catch (yaml_error) {\n        try {\n            // eslint-disable-next-line import-x/no-named-as-default-member\n            parsed = json5__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(content);\n        }\n        catch (json5_error) {\n            try {\n                parsed = JSON.parse((0,jsonrepair__WEBPACK_IMPORTED_MODULE_2__.jsonrepair)(content));\n            }\n            catch (json_error) {\n                const toError = (error) => (error instanceof Error ? error.message : String(error));\n                throw new Error(literalYamlify({\n                    ['要解析的字符串不是有效的 YAML/JSON 格式']: {\n                        字符串内容: content,\n                        YAML错误信息: toError(yaml_error),\n                        JSON5错误信息: toError(json5_error),\n                        尝试修复JSON时的错误信息: toError(json_error),\n                    },\n                }));\n            }\n        }\n    }\n    return parsed;\n}\nasync function checkAndUpdateCharacter(name, latest_version, png_url) {\n    const current_version = (await getCharacter(name)).version.trim() || '0.0.0';\n    if ((0,compare_versions__WEBPACK_IMPORTED_MODULE_0__.compare)(current_version, latest_version, '>=')) {\n        return;\n    }\n    await importRawCharacter(name, await fetch(png_url).then(response => response.blob()));\n    replaceCharacter(name, { version: latest_version });\n    toastr.success(`角色卡已自动更新到 '${latest_version.startsWith('v') ? latest_version : `v${latest_version}`}'`, name);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0IsQ0FBQyxJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQztJQUNwRCxNQUFNLENBQUMsT0FBTyxDQUNaLGNBQWMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLGNBQWMsRUFBRSxHQUFHLEVBQ3ZGLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS91dGlsL2NvbW1vbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wYXJlIH0gZnJvbSAnY29tcGFyZS12ZXJzaW9ucyc7XG5pbXBvcnQgSlNPTjUgZnJvbSAnanNvbjUnO1xuaW1wb3J0IHsganNvbnJlcGFpciB9IGZyb20gJ2pzb25yZXBhaXInO1xuaW1wb3J0IHsgdG9Eb3RQYXRoIH0gZnJvbSAnem9kL3Y0L2NvcmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduSW5wbGFjZTxUPihkZXN0aW5hdGlvbjogVFtdLCBuZXdfYXJyYXk6IFRbXSk6IFRbXSB7XG4gIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XG4gIGRlc3RpbmF0aW9uLnB1c2goLi4ubmV3X2FycmF5KTtcbiAgcmV0dXJuIGRlc3RpbmF0aW9uO1xufVxuXG4vLyDkv67mraMgXy5tZXJnZSDlr7nmlbDnu4TnmoTlkIjlubbpgLvovpEsIFsxLCAyLCAzXSDlkowgWzQsIDVdIOWQiOW5tuWQjuWPmOaIkCBbNCwgNV0g6ICM5LiN5pivIFs0LCA1LCAzXVxuZXhwb3J0IGZ1bmN0aW9uIGNvcnJlY3RseU1lcmdlPFRPYmplY3QsIFRTb3VyY2U+KGxoczogVE9iamVjdCwgcmhzOiBUU291cmNlKTogVE9iamVjdCAmIFRTb3VyY2Uge1xuICAgIHJldHVybiBfLm1lcmdlV2l0aChsaHMsIHJocywgKF9saHMsIHJocykgPT4gKF8uaXNBcnJheShyaHMpID8gcmhzIDogdW5kZWZpbmVkKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaHVua0J5PFQ+KGFycmF5OiBUW10sIHByZWRpY2F0ZTogKGxoczogVCwgcmhzOiBUKSA9PiBib29sZWFuKTogVFtdW10ge1xuICBpZiAoYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgY2h1bmtzOiBUW11bXSA9IFtbYXJyYXlbMF1dXTtcbiAgZm9yIChjb25zdCBbbGhzLCByaHNdIG9mIF8uemlwKF8uZHJvcFJpZ2h0KGFycmF5KSwgXy5kcm9wKGFycmF5KSkpIHtcbiAgICBpZiAocHJlZGljYXRlKGxocyEsIHJocyEpKSB7XG4gICAgICBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDFdLnB1c2gocmhzISk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNodW5rcy5wdXNoKFtyaHMhXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjaHVua3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdleEZyb21TdHJpbmcoaW5wdXQ6IHN0cmluZywgcmVwbGFjZV9tYWNyb3M/OiBib29sZWFuKTogUmVnRXhwIHwgbnVsbCB7XG4gIGlmICghaW5wdXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBtYWtlUmVnZXggPSAocGF0dGVybjogc3RyaW5nLCBmbGFnczogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHJlcGxhY2VfbWFjcm9zKSB7XG4gICAgICBwYXR0ZXJuID0gc3Vic3RpdHVkZU1hY3JvcyhwYXR0ZXJuKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgZmxhZ3MpO1xuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IG1hdGNoID0gaW5wdXQubWF0Y2goL1xcLyguKylcXC8oW2Etel0qKS9pKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFrZVJlZ2V4KF8uZXNjYXBlUmVnRXhwKGlucHV0KSwgJ2knKTtcbiAgICB9XG4gICAgaWYgKG1hdGNoWzJdICYmICEvXig/IS4qPyguKS4qP1xcMSlbZ21peFhzdVVBSl0rJC8udGVzdChtYXRjaFszXSkpIHtcbiAgICAgIHJldHVybiBtYWtlUmVnZXgoaW5wdXQsICdpJyk7XG4gICAgfVxuICAgIGxldCBmbGFncyA9IG1hdGNoWzJdID8/ICcnO1xuICAgIF8ucHVsbChmbGFncywgJ2cnKTtcbiAgICBpZiAoZmxhZ3MuaW5kZXhPZignaScpID09PSAtMSkge1xuICAgICAgZmxhZ3MgPSBmbGFncyArICdpJztcbiAgICB9XG4gICAgcmV0dXJuIG1ha2VSZWdleChtYXRjaFsxXSwgZmxhZ3MpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXVpZHY0KCk6IHN0cmluZyB7XG4gIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tNaW5pbXVtVmVyc2lvbihleHBlY3RlZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nKSB7XG4gIGlmIChjb21wYXJlKGF3YWl0IGdldFRhdmVybkhlbHBlclZlcnNpb24oKSwgZXhwZWN0ZWQsICc8JykpIHtcbiAgICB0b2FzdHIuZXJyb3IoYCcke3RpdGxlfScg6ZyA6KaB6YWS6aaG5Yqp5omL54mI5pysID49ICcke2V4cGVjdGVkfSdgLCAn54mI5pys5LiN5YW85a65Jyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXR0aWZ5RXJyb3JXaXRoSW5wdXQoZXJyb3I6IHouWm9kRXJyb3IpIHtcbiAgcmV0dXJuIF8oWy4uLmVycm9yLmlzc3Vlc10pXG4gICAgLnNvcnRCeShpc3N1ZSA9PiBpc3N1ZS5wYXRoPy5sZW5ndGggPz8gMClcbiAgICAuZmxhdE1hcChpc3N1ZSA9PiB7XG4gICAgICBjb25zdCBsaW5lcyA9IFtg4pyWICR7aXNzdWUubWVzc2FnZX1gXTtcbiAgICAgIGlmIChpc3N1ZS5wYXRoPy5sZW5ndGgpIHtcbiAgICAgICAgbGluZXMucHVzaChgICDihpIg6Lev5b6EOiAke3RvRG90UGF0aChpc3N1ZS5wYXRoKX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc3N1ZS5pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCAg4oaSIOi+k+WFpTogJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5pbnB1dCl9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfSlcbiAgICAuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaXRlcmFsWWFtbGlmeSh2YWx1ZTogYW55KSB7XG4gIHJldHVybiBZQU1MLnN0cmluZ2lmeSh2YWx1ZSwgeyBibG9ja1F1b3RlOiAnbGl0ZXJhbCcgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN0cmluZyhjb250ZW50OiBzdHJpbmcpOiBhbnkge1xuICBsZXQgcGFyc2VkOiB1bmtub3duO1xuICB0cnkge1xuICAgIHBhcnNlZCA9IFlBTUwucGFyc2VEb2N1bWVudChjb250ZW50LCB7IG1lcmdlOiB0cnVlIH0pLnRvSlMoKTtcbiAgfSBjYXRjaCAoeWFtbF9lcnJvcikge1xuICAgIHRyeSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0LXgvbm8tbmFtZWQtYXMtZGVmYXVsdC1tZW1iZXJcbiAgICAgIHBhcnNlZCA9IEpTT041LnBhcnNlKGNvbnRlbnQpO1xuICAgIH0gY2F0Y2ggKGpzb241X2Vycm9yKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25yZXBhaXIoY29udGVudCkpO1xuICAgICAgfSBjYXRjaCAoanNvbl9lcnJvcikge1xuICAgICAgICBjb25zdCB0b0Vycm9yID0gKGVycm9yOiB1bmtub3duKSA9PiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGxpdGVyYWxZYW1saWZ5KHtcbiAgICAgICAgICAgIFsn6KaB6Kej5p6Q55qE5a2X56ym5Liy5LiN5piv5pyJ5pWI55qEIFlBTUwvSlNPTiDmoLzlvI8nXToge1xuICAgICAgICAgICAgICDlrZfnrKbkuLLlhoXlrrk6IGNvbnRlbnQsXG4gICAgICAgICAgICAgIFlBTUzplJnor6/kv6Hmga86IHRvRXJyb3IoeWFtbF9lcnJvciksXG4gICAgICAgICAgICAgIEpTT0416ZSZ6K+v5L+h5oGvOiB0b0Vycm9yKGpzb241X2Vycm9yKSxcbiAgICAgICAgICAgICAg5bCd6K+V5L+u5aSNSlNPTuaXtueahOmUmeivr+S/oeaBrzogdG9FcnJvcihqc29uX2Vycm9yKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0FuZFVwZGF0ZUNoYXJhY3RlcihuYW1lOiBzdHJpbmcsIGxhdGVzdF92ZXJzaW9uOiBzdHJpbmcsIHBuZ191cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBjdXJyZW50X3ZlcnNpb24gPSAoYXdhaXQgZ2V0Q2hhcmFjdGVyKG5hbWUpKS52ZXJzaW9uLnRyaW0oKSB8fCAnMC4wLjAnO1xuICBpZiAoY29tcGFyZShjdXJyZW50X3ZlcnNpb24sIGxhdGVzdF92ZXJzaW9uLCAnPj0nKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBhd2FpdCBpbXBvcnRSYXdDaGFyYWN0ZXIobmFtZSwgYXdhaXQgZmV0Y2gocG5nX3VybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5ibG9iKCkpKTtcbiAgcmVwbGFjZUNoYXJhY3RlcihuYW1lLCB7IHZlcnNpb246IGxhdGVzdF92ZXJzaW9uIH0pO1xuICB0b2FzdHIuc3VjY2VzcyhcbiAgICBg6KeS6Imy5Y2h5bey6Ieq5Yqo5pu05paw5YiwICcke2xhdGVzdF92ZXJzaW9uLnN0YXJ0c1dpdGgoJ3YnKSA/IGxhdGVzdF92ZXJzaW9uIDogYHYke2xhdGVzdF92ZXJzaW9ufWB9J2AsXG4gICAgbmFtZSxcbiAgKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./util/common.ts\n\n}");
  },
  "./示例/角色卡示例/脚本/自动更新角色卡/index.ts"(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _util_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @util/common */ \"./util/common.ts\");\n\n$(async () => {\n    await (0,_util_common__WEBPACK_IMPORTED_MODULE_0__.checkAndUpdateCharacter)('呕吐内心的少女', await fetch('https://testingcf.jsdelivr.net/gh/StageDog/tavern_helper_template/dist/角色卡示例/index.yaml')\n        .then(response => response.text())\n        .then(text => _.get(YAML.parse(text), '版本', '0.0.0'))\n        .catch(() => '0.0.0'), 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_helper_template/dist/角色卡示例/角色卡示例.png');\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi/npLrkvosv6KeS6Imy5Y2h56S65L6LL+iEmuacrC/oh6rliqjmm7TmlrDop5LoibLljaEvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7QUFBdUQ7QUFFdkQsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO0lBQ1gsTUFBTSxxRUFBdUIsQ0FDM0IsU0FBUyxFQUNULE1BQU0sS0FBSyxDQUFDLHlGQUF5RixDQUFDO1NBQ25HLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQ3BELEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFDdkIsd0ZBQXdGLENBQ3pGLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS/npLrkvosv6KeS6Imy5Y2h56S65L6LL+iEmuacrC/oh6rliqjmm7TmlrDop5LoibLljaEvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hlY2tBbmRVcGRhdGVDaGFyYWN0ZXIgfSBmcm9tICdAdXRpbC9jb21tb24nO1xuXG4kKGFzeW5jICgpID0+IHtcbiAgYXdhaXQgY2hlY2tBbmRVcGRhdGVDaGFyYWN0ZXIoXG4gICAgJ+WRleWQkOWGheW/g+eahOWwkeWlsycsXG4gICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vdGVzdGluZ2NmLmpzZGVsaXZyLm5ldC9naC9TdGFnZURvZy90YXZlcm5faGVscGVyX3RlbXBsYXRlL2Rpc3Qv6KeS6Imy5Y2h56S65L6LL2luZGV4LnlhbWwnKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgLnRoZW4odGV4dCA9PiBfLmdldChZQU1MLnBhcnNlKHRleHQpLCAn54mI5pysJywgJzAuMC4wJykpXG4gICAgICAuY2F0Y2goKCkgPT4gJzAuMC4wJyksXG4gICAgJ2h0dHBzOi8vdGVzdGluZ2NmLmpzZGVsaXZyLm5ldC9naC9TdGFnZURvZy90YXZlcm5faGVscGVyX3RlbXBsYXRlL2Rpc3Qv6KeS6Imy5Y2h56S65L6LL+inkuiJsuWNoeekuuS+iy5wbmcnLFxuICApO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./示例/角色卡示例/脚本/自动更新角色卡/index.ts\n\n}");
  },
  "compare-versions"(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__;
  },
  json5(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__;
  },
  jsonrepair(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_jsonrepair_esm_703c329d__;
  },
  "zod/v4/core"(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_zod_v4_core_esm_e929c490__;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  if (__webpack_modules__[moduleId] === undefined) {
    var e = new Error("Cannot find module '" + moduleId + "'");
    e.code = "MODULE_NOT_FOUND";
    throw e;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./示例/角色卡示例/脚本/自动更新角色卡/index.ts");